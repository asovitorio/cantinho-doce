<!doctype html>
<html lang="pt-br">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src='https://kit.fontawesome.com/a076d05399.js'></script>
    <link rel='stylesheet' href='/stylesheets/style.css' />

    <title>Sistema</title>
</head>

<body>

    <div class="sytem-back ">
        <br>
        <nav class="navbar navbar-expand-lg navbar-light  menu">
            <div>
                <img src="/images/logo_dna_antonia.jpg" class="logo-home" alt="">
            </div>
            <div>

                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </div>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link active" href="/" style="color:#fff2cc">
                        <h6><i class='fas fa-door-open' style='font-size:16px'> </i> Sair </h6>
                    </a>
                </div>
            </div>
        </nav>
        <div class="">

            <div class="table-responsive container">
                <div class="col-lg-12">
                    <div class="btn-add"><button class="btn btn-success" data-toggle="modal" data-target="#add"><i
                                class='fas fa-plus' style='font-size:24px'></i></button>
                    </div>
                </div>
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr class="line-table line-head">
                            <th>Imagem</th>
                            <th>Categoria</th>
                            <th>Descrição</th>
                            <th>Valor</th>
                            <th>Ação</th>

                        </tr>
                    </thead>
                    <tbody>
                        <% produtos.forEach(produto => {%>
                            <tr class="line-table">
                                <th scope="row" class=""><img src="/images/uploads/<%=produto.image%>" alt="image_produto" class="image-table">
                                </th>
                                <td>
                                    <h4>
                                        <%=produto.categoria%>
                                    </h4>
                                </td>
                                <td>
                                    <h4>
                                        <%=produto.descricao%>
                                    </h4>
                                </td>
                                <td>
                                    <h4>
                                        R$
                                        <%=produto.valor%>
                                    </h4>
                                </td>
                                <td>
                                    <button type="button" class="btn-edit" data-toggle="modal" data-target="#atualizar">
                                    <i class='fas fa-pen' style='font-size:24px'></i>
                                </button>

                                    <input type="hidden" class="id-produto" name="id" value="<%=produto.id%>">
                                    <input type="hidden" class="categoria" name="categoria" value="<%=produto.categoria%>">
                                    <input type="hidden" class="descricao" name="descricao" value="<%=produto.descricao%>">
                                    <input type="hidden" class="valor" name="valor" value="<%=produto.valor%>">

                                    <button type="button" class="btn-delete" data-toggle="modal" data-target="#deletar">
                                       <i class='far fa-trash-alt' style='font-size:24px'></i>
                                   </button>

                                </td>
                            </tr>
                            <%}); %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <%- include('modal') %>
        <!-- Optional JavaScript; choose one of the two! -->

        <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous">
        </script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous">
        </script>

        <!-- Option 2: jQuery, Popper.js, and Bootstrap JS
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>
    -->
        <script>
            // ##### Variaveis dos dados produtos #####
            const id = document.getElementsByClassName('id-produto')
            const categoria = document.getElementsByClassName('categoria')
            const valor = document.getElementsByClassName('valor')
            const descricao = document.getElementsByClassName('descricao')
                // const imageProduto = document.getElementsByClassName('image-produto')
            const btnProduto = document.getElementsByClassName('btn-edit')

            // ##form delete
            const idInputDelete = document.getElementById('id-input-delete')
            const formDelete = document.getElementById('form-delete')
            const btnDelete = document.getElementsByClassName('btn-delete')

            // ##form update
            const formUpdate = document.getElementById('form-update')
            const idInputUpdate = document.getElementById('id-input-update')
            const descricaoInputUpdate = document.getElementById('descricao-input-update')
            const valorInputUpdate = document.getElementById('valor-input-update')
            const categoriaInputUpdate = document.getElementById('categoria-input-update')
                // const imageInputProduto = document.getElementById('image-produto')
            const btnUpdate = document.getElementById('btn-update')

            // ##### Logica do Delete #####
            for (let index = 0; index < btnDelete.length; index++) {
                btnDelete[index].addEventListener('click', e => {
                    idInputDelete.value = id[index].value
                })
            }
            // ##### Logica do Update #####

            for (let index = 0; index < btnProduto.length; index++) {
                btnProduto[index].addEventListener('click', e => {
                    idInputUpdate.value = id[index].value
                    descricaoInputUpdate.value = descricao[index].value
                    valorInputUpdate.value = valor[index].value
                    categoriaInputUpdate.value = categoria[index].value
                        // imageInputProduto.value = imageProduto[index].value
                })

            }
        </script>
</body>

</html>